# API
## `Devour([object settings])`
During construction you can provide an object containing your override and/or additional settings.
The default settings are:
- `debounce`: (int) `100`, add a default debounce of 100ms when triggering a task from a watched change, this adds a slight delay to the build process, but in general should prevent unintended double takes
- `basePath`: (string), the current working directory. The basePath is prepended to anything with resembles a relative path (e.g. does not start with `/`)
- `gulpFiles`: (string) `'gulp'`. The directory (relative to `basePath` if not starting with `/`) where the tasks and pipes are located
- `output`: (string) `'dist'`. The directory (relative to `basePath` if not starting with `/`) where to write the output
- `verbose`: (bool-ish) `true`. Control the amount of informative output generated by Devour. Any `false`-ish value will keep the output to a minimum, any `true`-ish value will inform about tasks being available and/or scheduled, (int) `2` will add information about the tasks which started, (int) `3+` will add information about the (prepared) pipes being used.

There are additional options, which are not preconfigured:
- `defaults`: (array). And array containing the plugins you'd like to run on _every_ task. Use it for example to ensure you always have [`gulp-plumber`](https://www.npmjs.com/package/gulp-plumber) by providing `{"defaults":["plumber"]}`
- (You still need to ensure the plugins to be available for your project by adding them as development dependencies).

Upon initialization, devour will inform you about the available tasks and pipes, for example
```
Devour initialized
  - available tasks: <task>, <task>, <task>
  - available pipes: defaults, <pipe>, <pipe>, <pipe>
```

## `.gulp`
If you need to access the `gulp` instance under the hood, you can by using `devour.gulp`. It truly is gulp itself you can use it to configure manual tasks.

## `.task(string name, array build [, array watch])`
Schedules a task (loaded from the `gulp/task`-directory) to run on the set of files in `build`, the `watch` parameter is optional, if omitted the watch-list will be equal to the build-list. If there should be no watch configured, pass on (bool) `false`.
Any task can be directly invoked from the command line, just like when using `gulp` itself (note, if the watch is explicitly disabled, the only way to make the task run is by calling it from the commandline or by calling `.start()` after scheduling your tasks).
Each configured task will inform you about the way it was scheduled, for example:
```
Task <name> activated
  - build files: <path>, <path>
  - watch files: <path>, <path>, <path>
```

## `.start()`
If you want to register the scheduled tasks to the `'default'` task, you can do so by calling `.start()`. If running from the commandline with a specified task, just like `gulp` the default task will be skipped.

## `.source(mixed path)`
Basically being `gulp.src`, the `.source` method accepts the same arguments. What it does more is that it will pipe the source list through the default pipe.

## `.plugin(string name [, ... ])`
Don't like to scatter `require` all over the place, just use the `devour.plugin('plugin')` syntax in your tasks and pipes, this will take care of loading the plugins, as long as you've provided the plugins that is.

## `.pipe(string name)`
Like plugin, but this time call a named pipe (defined in `gulp/pipe/*.js`), use this to create recurring flows and call them from your tasks.

## `.config([string key, [, mixed otherwise ]])`
Obtain all (if no key provided) configuration values, or request the value of a specific key and if it resolves to `false`-ish, return the value provided in `otherwise`.
```js
var output = devour.config('output'),  //  'dist' by default
	myDefault = devour.config('unknown', 'hello world');  //  'unknown' does not exist, returns 'hello world'
```

## `.write([string path [, object options ]])`
The equivalent of `gulp.dest`, meaning it will stream the contents into the file at hand. The optional (string) `relative` allows to indicate a path (either absolute or relative to the configured `output` path). The optional (object) `options` is passed along the write stream, so you can speficy the file mode or whether or not to read the stream.

## `.min(object file)`
A small courtesy function which takes a file object and cleans up any existing `.min` or `.prep` from the filename before ensuring the `.min` at the beginning of the extension.

## Further reading
- [The API](documentation/api.md)
<!-- - [Getting Started](documentation/getting-started.md) -->
